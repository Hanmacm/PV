<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Inicio - Punto de Venta</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="css/PV.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

</head>
<body>

<div class="layout">

 <aside class="sidebar-modern">

        <div class="brand-box">
            <div class="brand-avatar">PV</div>
            <div>
              <strong class="brand-user" id="brandUserName">Usuario</strong>
<small id="brandUserRol"></small>

                <small>Sistema Punto de Venta</small>
                <small>La Carpita</small>
            </div>
        </div>

        <nav class="menu-modern">
    <a id="menuInicio" href="/inicio" class="item active"><i class="bi bi-house"></i> Inicio</a>
    <a id="menuVentas" href="/ventas" class="item"><i class="bi bi-shop"></i> Ventas</a>
    <a id="menuCotizaciones" href="/cotizaciones" class="item"><i class="bi bi-file-text"></i> Cotizaciones</a>
    <a id="menuPedidos" href="/pedidos" class="item"><i class="bi bi-people"></i> Pedidos</a>
    <a id="menuCompras" href="/compras" class="item"><i class="bi bi-cart"></i> Compras</a>
    <a id="menuProductos" href="/productos" class="item"><i class="bi bi-box"></i> Productos</a>
    <a id="menuClientes" href="/clientes" class="item"><i class="bi bi-person"></i> Clientes</a>
    <a id="menuCajas" href="/cajas" class="item"><i class="bi bi-cash-stack"></i> Cajas</a>
    <a id="menuUsuarios" href="/usuarios" class="item"><i class="bi bi-person-badge"></i> Usuarios</a>
    <a id="menuProveedores" href="/proveedores" class="item"><i class="bi bi-truck"></i> Proveedores</a>
    <a id="menuConsultas" href="/consultas" class="item"><i class="bi bi-search"></i> Consultas</a>
    <a id="menuReportes" href="/reportes" class="item"><i class="bi bi-file-earmark"></i> Reportes</a>
    <a id="menuEstadisticas" href="/estadisticas" class="item"><i class="bi bi-graph-up"></i> Estadísticas</a>
    <a id="menuFacturacion" href="/facturacion" class="item"><i class="bi bi-receipt"></i> Facturación</a>
    
</nav>

<div class="logout-box">
    <a href="#" onclick="cerrarSesion()" class="logout-btn">
        <i class="bi bi-box-arrow-right"></i> Cerrar sesión
    </a>
</div>


    </aside>

    <main class="content dashboard-content">
        <div class="content-header">
            <div>
                <h1>Inicio</h1>
                <small>Dashboard general del punto de venta.</small>
            </div>
        </div>

<div id="welcomeBox" class="welcome-box">
    <h2 id="welcomeMensaje">Bienvenido</h2>
    <p id="welcomeInfo"></p>
</div>

        <section class="dash-row dash-row-top">
            <div class="dash-col-2">
                <!-- Caja Activa -->
                <div id="alertCajaInicio" class="alert-caja premium-alert"></div>

                <!-- Filtros -->
                <div class="card filtros-fecha filtros-card">
                    <div class="filtros-header">
                        <div>
                            <strong>Actividad</strong>
                            <small>Filtra los datos del dashboard por período.</small>
                        </div>
                        <div class="filtros-botones">
                            <button onclick="filtrarDash('hoy')" class="btn btn-light btn-filtro">Hoy</button>
                            <button onclick="filtrarDash('semana')" class="btn btn-light btn-filtro">Semana</button>
                            <button onclick="filtrarDash('mes')" class="btn btn-light btn-filtro">Mes</button>
                        </div>
                    </div>
                </div>
            </div>

           
            <div class="dash-col-3">
                <div class="card card-kpis">
                    <div class="kpi-grid">
                        <div class="kpi-card kpi-ventas">
                            <div class="kpi-icon">
                                <i class="bi bi-cash-stack"></i>
                            </div>
                            <div class="kpi-body">
                                <span class="kpi-label">Ventas del día</span>
                                <p id="kpi-ventas-dia" class="kpi-value">$0.00</p>
                            </div>
                        </div>

                        <div class="kpi-card kpi-tickets">
                            <div class="kpi-icon">
                                <i class="bi bi-receipt-cutoff"></i>
                            </div>
                            <div class="kpi-body">
                                <span class="kpi-label">Tickets generados</span>
                                <p id="kpi-tickets-dia" class="kpi-value">0</p>
                            </div>
                        </div>

                        <div class="kpi-card kpi-promedio">
                            <div class="kpi-icon">
                                <i class="bi bi-graph-up"></i>
                            </div>
                            <div class="kpi-body">
                                <span class="kpi-label">Ticket promedio</span>
                                <p id="kpi-ticket-promedio" class="kpi-value">$0.00</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <section class="dash-row graficas-doble">
            <div class="dash-col-2">
                <div class="card card-chart">
                    <div class="card-header-inline">
                        <h3>Ventas por método</h3>
                        <small>Distribución de cobros.</small>
                    </div>
                    <div class="chart-container">
    <canvas id="miniMetodos"></canvas>
</div>

                </div>
            </div>
            <div class="dash-col-2">
                <div class="card card-chart">
                    <div class="card-header-inline">
                        <h3>Top productos</h3>
                        <small>Productos más vendidos.</small>
                    </div>
                 <div class="chart-container">
    <canvas id="miniTop"></canvas>
</div>

                </div>
            </div>
        </section>

       
        <section class="dash-row">
            <div class="dash-col-3">
                <div class="card tabla-ultimas">
                    <div class="card-header-inline">
                        <h3>Últimas ventas</h3>
                        <small>Movimientos más recientes en caja.</small>
                    </div>
                    <div class="table-wrapper">
                        <table id="tablaUltimasVentas">
                            <thead>
                                <tr>
                                    <th>Folio</th>
                                    <th>Fecha / Hora</th>
                                    <th>Cliente</th>
                                    <th>Método</th>
                                    <th>Total</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="dash-col-1">
                <div class="card alertas-inventario">
                    <div class="card-header-inline">
                        <h3>Inventario bajo</h3>
                        <small>Productos próximos a agotarse.</small>
                    </div>
                    <ul id="listaInventarioBajo" class="inventario-lista"></ul>
                </div>
            </div>
        </section>
    </main>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/core.js"></script>
<script src="js/inicio.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const data = localStorage.getItem("usuario");

    if (data) {
        try {
            const usuario = JSON.parse(data);
            document.getElementById("brandUserName").textContent = usuario.nombre;
            document.getElementById("brandUserRol").textContent = usuario.rol;
        } catch (e) {
            console.error("Error JSON:", data);
        }
    }
});
</script>



</body>
</html>