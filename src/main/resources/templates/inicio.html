<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Inicio - Punto de Venta</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="css/PV.css">
<link rel="stylesheet" href="css/PVS.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>

<body>

<aside class="sidebar-modern sidebar-collapsed" id="sidebar">

    <div class="brand-box">
        <div class="brand-avatar">PV</div>
        <div class="brand-info">
            <strong class="brand-user" id="brandUserName">Usuario</strong>
            <small>Sistema Punto de Venta</small>
            <small>La Carpita</small>
        </div>
    </div>

    <nav class="menu-modern">
        <a href="/inicio" class="item active"><i class="bi bi-house"></i><span>Inicio</span></a>
        <a href="/ventas" class="item"><i class="bi bi-shop"></i><span>Ventas</span></a>
        <a href="/cotizaciones" class="item"><i class="bi bi-file-text"></i><span>Cotizaciones</span></a>
        <a href="/pedidos" class="item"><i class="bi bi-people"></i><span>Pedidos</span></a>
        <a href="/compras" class="item"><i class="bi bi-cart"></i><span>Compras</span></a>
        <a href="/productos" class="item"><i class="bi bi-box"></i><span>Productos</span></a>
        <a href="/clientes" class="item"><i class="bi bi-person"></i><span>Clientes</span></a>
        <a href="/cajas" class="item"><i class="bi bi-cash-stack"></i><span>Cajas</span></a>
        <a href="/usuarios" class="item"><i class="bi bi-person-badge"></i><span>Usuarios</span></a>
        <a href="/proveedores" class="item"><i class="bi bi-truck"></i><span>Proveedores</span></a>
        <a href="/consultas" class="item"><i class="bi bi-search"></i><span>Consultas</span></a>
        <a href="/reportes" class="item"><i class="bi bi-file-earmark"></i><span>Reportes</span></a>
        <a href="/estadisticas" class="item"><i class="bi bi-graph-up"></i><span>Estadísticas</span></a>
        <a href="/facturacion" class="item"><i class="bi bi-receipt"></i><span>Facturación</span></a>
    </nav>

    <div class="logout-box">
        <a href="#" onclick="cerrarSesion()" class="logout-btn">
            <i class="bi bi-box-arrow-right"></i> <span>Cerrar sesión</span>
        </a>
    </div>

</aside>

<main class="content dashboard-content">

    <header class="topbar-app">

        <button class="hamburger-btn" onclick="toggleSidebar()">
            <i class="bi bi-list"></i>
        </button>

        <div class="topbar-title">
            <h1>Inicio</h1>
            <small>Dashboard general del punto de venta</small>
        </div>

        <div class="topbar-actions">
            <!-- vacío por ahora -->
        </div>

    </header>

    <div id="welcomeBox" class="welcome-box">
        <h2 id="welcomeMensaje">Bienvenido</h2>
        <p id="welcomeInfo"></p>
    </div>

    <section class="dash-row dash-row-top">
        <div class="dash-col-2">

            <div id="alertCajaInicio" class="alert-caja premium-alert"></div>

            <div class="card filtros-fecha filtros-card">
                <div class="filtros-header">
                    <div>
                        <strong>Actividad</strong>
                        <small>Filtra los datos del dashboard por período.</small>
                    </div>
                    <div class="filtros-botones">
                        <button onclick="filtrarDash('hoy')" class="btn btn-light">Hoy</button>
                        <button onclick="filtrarDash('semana')" class="btn btn-light">Semana</button>
                        <button onclick="filtrarDash('mes')" class="btn btn-light">Mes</button>
                    </div>
                </div>
            </div>

        </div>

        <div class="dash-col-3">
            <div class="card card-kpis">
                <div class="kpi-grid">

                    <div class="kpi-card kpi-ventas">
                        <div class="kpi-icon"><i class="bi bi-cash-stack"></i></div>
                        <div class="kpi-body">
                            <span class="kpi-label">Ventas del día</span>
                            <p id="kpi-ventas-dia" class="kpi-value">$0.00</p>
                        </div>
                    </div>

                    <div class="kpi-card kpi-tickets">
                        <div class="kpi-icon"><i class="bi bi-receipt-cutoff"></i></div>
                        <div class="kpi-body">
                            <span class="kpi-label">Tickets generados</span>
                            <p id="kpi-tickets-dia" class="kpi-value">0</p>
                        </div>
                    </div>

                    <div class="kpi-card kpi-promedio">
                        <div class="kpi-icon"><i class="bi bi-graph-up"></i></div>
                        <div class="kpi-body">
                            <span class="kpi-label">Ticket promedio</span>
                            <p id="kpi-ticket-promedio" class="kpi-value">$0.00</p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <section class="dash-row graficas-doble">
        <div class="dash-col-2">
            <div class="card card-chart">
                <div class="card-header-inline">
                    <h3>Ventas por método</h3>
                    <small>Distribución de cobros.</small>
                </div>
                <div class="chart-container">
                    <canvas id="miniMetodos"></canvas>
                </div>
            </div>
        </div>

        <div class="dash-col-2">
            <div class="card card-chart">
                <div class="card-header-inline">
                    <h3>Top productos</h3>
                    <small>Productos más vendidos.</small>
                </div>
                <div class="chart-container">
                    <canvas id="miniTop"></canvas>
                </div>
            </div>
        </div>
    </section>

    <section class="dash-row">
        <div class="dash-col-3">
            <div class="card tabla-ultimas">
                <div class="card-header-inline">
                    <h3>Últimas ventas</h3>
                    <small>Movimientos recientes.</small>
                </div>
                <div class="table-wrapper">
                    <table id="tablaUltimasVentas">
                        <thead>
                            <tr>
                                <th>Folio</th>
                                <th>Fecha</th>
                                <th>Cliente</th>
                                <th>Método</th>
                                <th>Total</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="dash-col-1">
            <div class="card alertas-inventario">
                <div class="card-header-inline">
                    <h3>Inventario bajo</h3>
                    <small>Productos próximos a agotarse.</small>
                </div>
                <ul id="listaInventarioBajo" class="inventario-lista"></ul>
            </div>
        </div>
    </section>

</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/core.js"></script>
<script src="js/inicio.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const data = localStorage.getItem("usuario");
    if (data) {
        try {
            const usuario = JSON.parse(data);
            document.getElementById("brandUserName").textContent = usuario.nombre;
        } catch (e) {}
    }
});
</script>

</body>
</html>
